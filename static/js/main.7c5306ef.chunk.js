(this["webpackJsonpgroup-finder"]=this["webpackJsonpgroup-finder"]||[]).push([[0],{13:function(e,t,n){},24:function(e,t,n){},26:function(e,t,n){},28:function(e,t,n){"use strict";n.r(t);var i=n(7),s=n.n(i),a=n(15),r=n.n(a),l=(n(24),n(1)),c=n(2),o=n(3),d=n(8),u=n(4),j=n(5),b=(n(13),new XMLHttpRequest);function h(e,t){return"Basic "+btoa(e+":"+t)}function p(e,t,n,i,s){for(var a in b.open(e,"https://50.116.37.108:3000"+t),b.setRequestHeader("Content-Type","application/json"),n)b.setRequestHeader(n[a][0],n[a][1]);var r;null!==i&&""!==i?b.send(JSON.stringify(i)):b.send(),b.onreadystatechange=function(e){try{r=JSON.parse(b.response)}catch(t){return}console.log(r),s(b.status,r)}}var m=n(0);function f(e){return!0===e.isHiden?Object(m.jsx)("div",{className:"form-popup bottom-right",id:"myForm",children:Object(m.jsx)("div",{className:"form-container",children:Object(m.jsx)("button",{className:"show-button",onClick:function(){e.hide()},children:"[Show]"})})}):Object(m.jsx)("div",{className:"form-popup bottom-right",id:"myForm",children:Object(m.jsxs)("div",{className:"form-container",children:[Object(m.jsx)("h1",{className:"center",children:e.title}),Object(m.jsx)("button",{className:"hide-button",onClick:function(){e.hide()},children:"[Hide]"}),Object(m.jsx)(_,{title:e.title,errorMsgExists:""!==e.errorMsg}),Object(m.jsx)(O,{errorMsg:e.errorMsg}),Object(m.jsx)("button",{className:"btn",onClick:function(){e.submit()},children:"Submit"}),Object(m.jsx)("button",{className:"btn-sign-up",onClick:function(){e.changeType()},children:e.other})]})})}function O(e){return""===e.errorMsg?Object(m.jsx)(m.Fragment,{}):Object(m.jsx)("p",{className:"error-msg",children:e.errorMsg})}function _(e){var t=e.errorMsgExists?{"margin-bottom":"10px"}:{};return"Login"===e.title?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("label",{htmlFor:"username",children:Object(m.jsx)("b",{children:"Username"})}),Object(m.jsx)("input",{type:"text",placeholder:"Enter Username",name:"username",id:"l_username_field",required:!0}),Object(m.jsx)("label",{htmlFor:"password",children:Object(m.jsx)("b",{children:"Password"})}),Object(m.jsx)("input",{type:"password",placeholder:"Enter Password",name:"password",id:"l_password_field",style:t,required:!0})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("label",{htmlFor:"name",children:Object(m.jsx)("b",{children:"Name"})}),Object(m.jsx)("input",{type:"text",placeholder:"Enter Name",name:"name",id:"su_name_field",required:!0}),Object(m.jsx)("label",{htmlFor:"email",children:Object(m.jsx)("b",{children:"Email"})}),Object(m.jsx)("input",{type:"text",placeholder:"Enter Email",name:"email",id:"su_email_field",required:!0}),Object(m.jsx)("label",{htmlFor:"username",children:Object(m.jsx)("b",{children:"Username"})}),Object(m.jsx)("input",{type:"text",placeholder:"Enter Username",name:"username",id:"su_username_field",required:!0}),Object(m.jsx)("label",{htmlFor:"password",children:Object(m.jsx)("b",{children:"Password"})}),Object(m.jsx)("input",{type:"password",placeholder:"Enter Password",name:"password",id:"su_password_field",style:{"margin-bottom":"10px"},required:!0}),Object(m.jsx)("input",{type:"password",placeholder:"Re-enter Password",name:"re-password",id:"su_re-password_field",style:t,required:!0})]})}var g=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).state={hide:!1,formType:"Login",errorMsg:""},i}return Object(o.a)(n,[{key:"otherFormType",value:function(){return"Login"===this.state.formType?"Sign Up":"Login"}},{key:"login",value:function(e,t){var n=this;p("GET","/accounts",[["Authorization",h(e,t)]],{},(function(i,s){401===i?n.setState(Object(l.a)(Object(l.a)({},n.state),{},{errorMsg:"Invalid username/password."})):(n.setState(Object(l.a)(Object(l.a)({},n.state),{},{hide:!0,errorMsg:""})),n.loggedIn(e,t))}))}},{key:"loggedIn",value:function(e,t){this.props.login(e,t)}},{key:"loggedOut",value:function(){this.props.logout()}},{key:"handleLogin",value:function(){var e=document.getElementById("l_username_field").value,t=document.getElementById("l_password_field").value;this.login(e,t)}},{key:"handleSignUp",value:function(){var e=this,t=document.getElementById("su_name_field").value,n=document.getElementById("su_email_field").value,i=document.getElementById("su_username_field").value,s=document.getElementById("su_password_field").value,a=document.getElementById("su_re-password_field").value;s===a?p("POST","/accounts",[],{name:t,email:n,username:i,password:s},(function(t,n){e.login(i,s)})):this.setState(Object(l.a)(Object(l.a)({},this.state),{},{errorMsg:"Passwords do not match."}))}},{key:"handleSubmit",value:function(){"Login"===this.state.formType?this.handleLogin():this.handleSignUp()}},{key:"render",value:function(){var e=this;return Object(m.jsx)(f,{display:this.state.display,title:this.state.formType,other:this.otherFormType(),submit:function(){e.handleSubmit()},changeType:function(){e.setState(Object(l.a)(Object(l.a)({},e.state),{},{formType:e.otherFormType(),errorMsg:""}))},hide:function(){e.setState(Object(l.a)(Object(l.a)({},e.state),{},{hide:!e.state.hide,formType:e.state.formType}))},isHiden:this.state.hide,errorMsg:this.state.errorMsg})}}]),n}(s.a.Component);n(26);function x(e,t){return e===t?"active":""}var y=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(m.jsx)("ul",{className:"nav-ul",children:Object(m.jsx)(v,{changeMapDisplay:this.props.changeMapDisplay,display:this.props.display,showFriendDisplay:this.props.showFriendDisplay})})}}]),n}(s.a.Component);function v(e){var t=[],n=e.display;return t.push(Object(m.jsx)("li",{className:"nav-li left",children:Object(m.jsx)("button",{className:x(n,M.MY_PLANS),onClick:function(){return e.changeMapDisplay(M.MY_PLANS)},children:"My Plans"})},"0")),t.push(Object(m.jsx)("li",{className:"nav-li left",children:Object(m.jsx)("button",{className:x(n,M.FRIEND_PLANS),onClick:function(){return e.changeMapDisplay(M.FRIEND_PLANS)},children:"Friend Plans"})},"1")),t.push(Object(m.jsx)("li",{className:"nav-li left",children:Object(m.jsx)("button",{className:x(n,M.PUBLIC_PLANS),onClick:function(){return e.changeMapDisplay(M.PUBLIC_PLANS)},children:"Public Plans"})},"3")),t.push(Object(m.jsx)("li",{className:"nav-li right",children:Object(m.jsx)("button",{onClick:function(){e.showFriendDisplay()},children:"Add Friend"})},"5")),t}function w(e){return document.getElementById(e).value}var N=function(e){return Object(m.jsx)("div",{className:"form-popup middle",id:"planForm",children:Object(m.jsxs)("div",{className:"form-container",children:[Object(m.jsx)("h1",{class:"center",children:"New Plan"}),Object(m.jsx)("button",{className:"hide-button",onClick:function(){e.close()},children:"\xd7"}),Object(m.jsx)("label",{for:"title",children:Object(m.jsx)("b",{children:"Title"})}),Object(m.jsx)("input",{type:"text",placeholder:"Enter Title",name:"title",id:"plan_title_field",required:!0}),Object(m.jsx)("label",{for:"location_details",children:Object(m.jsx)("b",{children:"Location Details (optional)"})}),Object(m.jsx)("input",{type:"text",placeholder:"Enter Location Details",name:"loc_details",id:"plan_location_details_field",required:!0}),Object(m.jsx)("label",{for:"time",children:Object(m.jsx)("b",{children:"Time"})}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{type:"datetime-local",placeholder:"When will this happen?",name:"when",id:"plan_time_field",required:!0}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{for:"frequency",children:Object(m.jsx)("b",{children:"Frequency"})}),Object(m.jsx)("input",{type:"text",placeholder:"How often will this happen?",name:"frequency",id:"plan_frequency_field",required:!0}),Object(m.jsx)("label",{for:"description",children:Object(m.jsx)("b",{children:"Description"})}),Object(m.jsx)("br",{}),Object(m.jsx)("textarea",{id:"plan_description_field",rows:"4",cols:"30"}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{for:"description",children:Object(m.jsxs)("b",{children:["Location: (",Math.floor(1e4*e.lat)/1e4,", ",Math.floor(1e4*e.lng)/1e4,")"]})}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{type:"checkbox",id:"plan_public_field",name:"public",value:"public"}),Object(m.jsx)("label",{for:"public",children:" Public (ie. shown on home screen)"}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("button",{className:"btn",onClick:function(){var t;e.submit({title:w("plan_title_field"),location_details:w("plan_location_details_field"),time:w("plan_time_field"),frequency:w("plan_frequency_field"),description:w("plan_description_field"),route:{points:[{lat:e.lat,lng:e.lng}]},public:(t="plan_public_field",document.getElementById(t).checked)})},children:"Submit"})]})})},S=(n(27),document.getElementById("map-display"));function E(e){var t=[];for(var n in e)if(void 0!==+e[n].route.points[0].lat.$numberDecimal&&void 0!==+e[n].route.points[0].lng.$numberDecimal){var i={};i.title=e[n].title,i.coords={},i.location_details=e[n].location_details,i.timeframe=e[n].time+" "+e[n].frequency,i.coords.lat=+e[n].route.points[0].lat.$numberDecimal,i.coords.lng=+e[n].route.points[0].lng.$numberDecimal,void 0!==e[n].description&&(i.description=e[n].description),void 0!==e[n].owner&&(i.user_info="["+e[n].owner+"] "),t.push(i)}S.innerHTML=JSON.stringify(t),S.click()}function k(e){return document.getElementById(e).value}function P(e){var t=e.friend_obj.friends.map((function(e){return'"'+e+'"'})),n=e.friend_obj.friend_requests.map((function(e){return'"'+e+'"'}));return Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{style:{width:"50%"},children:Object(m.jsxs)("p",{children:["Friends: ",t.join()]})}),Object(m.jsx)("div",{style:{width:"50%"},children:Object(m.jsxs)("p",{children:["Friend Requests: ",n.join()]})})]})}var L=function(e){return Object(m.jsx)("div",{className:"form-popup middle",id:"planForm",children:Object(m.jsxs)("div",{className:"form-container",children:[Object(m.jsx)("h1",{class:"center",children:"Add/Remove Friends"}),Object(m.jsx)("button",{className:"hide-button",onClick:function(){e.close()},children:"\xd7"}),Object(m.jsx)("label",{for:"friend_requests",children:Object(m.jsx)("b",{children:"Pending Friend Requests:"})}),Object(m.jsx)(P,{friend_obj:e.friend_obj}),Object(m.jsx)("label",{for:"title",children:Object(m.jsx)("b",{children:"Username"})}),Object(m.jsx)("input",{type:"text",placeholder:"Enter Username",name:"title",id:"friend_username",required:!0}),Object(m.jsx)("button",{className:"btn",onClick:function(){e.add_friend({username:k("friend_username")})},children:"Add Friend"}),Object(m.jsx)("button",{className:"btn",onClick:function(){e.remove_friend({username:k("friend_username")})},children:"Remove Friend"})]})})},M={MY_PLANS:"MY_PLANS",FRIEND_PLANS:"FRIEND_PLANS",PUBLIC_PLANS:"PUBLIC_PLANS"};function F(e){return Object(m.jsx)("div",{className:"form-popup bottom-right",id:"myForm",children:Object(m.jsx)("div",{className:"form-container",children:Object(m.jsx)("button",{className:"logout-button",onClick:function(){e.logout()},children:"[Logout]"})})})}var I=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).state={logged_in:!1,create_plan:!1,friend_modal:!1,friend_obj:{friends:[],friend_requests:[]},display_type:M.PUBLIC_PLANS,user_info:{username:null,password:null,auth_str:null},current_plan:{lat:0,lng:0}},i.handleClick=i.handleClick.bind(Object(d.a)(i)),i.login=i.login.bind(Object(d.a)(i)),i.handlePlanSubmit=i.handlePlanSubmit.bind(Object(d.a)(i)),i.updateMap=i.updateMap.bind(Object(d.a)(i)),i.changeMapDisplay=i.changeMapDisplay.bind(Object(d.a)(i)),i.get_friends=i.get_friends.bind(Object(d.a)(i)),i.updateMap(i.state.display_type),i}return Object(o.a)(n,[{key:"changeMapDisplay",value:function(e){void 0!==M[e]&&(this.setState(Object(l.a)(Object(l.a)({},this.state),{},{display_type:e})),this.updateMap(e))}},{key:"updateMap",value:function(e){if(e===M.MY_PLANS){if(!this.state.logged_in)return;p("GET","/"+this.state.user_info.username+"/plans/1",[["Authorization",this.state.user_info.auth_str]],{},(function(e,t){if(200===e)E(t);else{var n=t.message;window.alert("["+e+" ERROR] "+n)}}))}else if(e===M.FRIEND_PLANS){if(!this.state.logged_in)return;p("GET","/"+this.state.user_info.username+"/friend-plans",[["Authorization",this.state.user_info.auth_str]],{},(function(e,t){if(200!==e){var n=t;return void 0!==n.message&&(n=n.message),void window.alert("["+e+" ERROR] "+n)}E(t)}))}else e===M.PUBLIC_PLANS&&p("GET","/plans",[],{},(function(e,t){if(200!==e){var n=t;return void 0!==n.message&&(n=n.message),void window.alert("["+e+" ERROR] "+n)}E(t)}))}},{key:"handleClick",value:function(e){var t=JSON.parse(document.getElementById("map-click").innerHTML);this.setState(Object(l.a)(Object(l.a)({},this.state),{},{create_plan:!0,current_plan:{lat:t.lat,lng:t.lng}}))}},{key:"login",value:function(e,t){var n=document.getElementById("map-click");this.setState(Object(l.a)(Object(l.a)({},this.state),{},{logged_in:!0,user_info:{username:e,password:t,auth_str:h(e,t)}})),this.get_friends_with_auth(e,h(e,t)),n.addEventListener("click",this.handleClick)}},{key:"logout",value:function(){var e=document.getElementById("map-click");this.setState(Object(l.a)(Object(l.a)({},this.state),{},{logged_in:!1,display_type:M.PUBLIC_PLANS})),this.updateMap(M.PUBLIC_PLANS),e.removeEventListener("click",this.handleClick)}},{key:"handlePlanSubmit",value:function(e){var t=this;p("POST","/"+this.state.user_info.username+"/plans",[["Authorization",this.state.user_info.auth_str]],e,(function(e,n){if(200!==e){var i=n.message;window.alert("["+e+" ERROR] "+i)}else t.setState(Object(l.a)(Object(l.a)({},t.state),{},{create_plan:!1}))}))}},{key:"add_friend",value:function(e){var t=this;p("POST","/"+this.state.user_info.username+"/friend",[["Authorization",this.state.user_info.auth_str]],e,(function(e,n){if(200!==e){var i=n.message;window.alert("Error! "+i)}else t.setState(Object(l.a)(Object(l.a)({},t.state),{},{friend_modal:!1}));t.get_friends()}))}},{key:"remove_friend",value:function(e){var t=this;p("DELETE","/"+this.state.user_info.username+"/friend",[["Authorization",this.state.user_info.auth_str]],e,(function(e,n){if(200!==e){var i=n.message;window.alert("Error! "+i)}else t.setState(Object(l.a)(Object(l.a)({},t.state),{},{friend_modal:!1}));t.get_friends()}))}},{key:"get_friends_with_auth",value:function(e,t){var n=this;p("GET","/"+e+"/friend",[["Authorization",t]],{},(function(e,t){if(200!==e){var i=t.message;window.alert("["+e+" ERROR] "+i),n.setState(Object(l.a)(Object(l.a)({},n.state),{},{friend_obj:{friends:[],friend_requests:[]}}))}else n.setState(Object(l.a)(Object(l.a)({},n.state),{},{friend_obj:t}))}))}},{key:"get_friends",value:function(){var e=this;p("GET","/"+this.state.user_info.username+"/friend",[["Authorization",this.state.user_info.auth_str]],{},(function(t,n){if(200!==t){var i=n.message;window.alert("["+t+" ERROR] "+i),e.setState(Object(l.a)(Object(l.a)({},e.state),{},{friend_obj:{friends:[],friend_requests:[]}}))}else e.setState(Object(l.a)(Object(l.a)({},e.state),{},{friend_obj:n}))}))}},{key:"render",value:function(){var e=this,t=Object(m.jsx)(y,{changeMapDisplay:this.changeMapDisplay,display:this.state.display_type,showFriendDisplay:function(){e.setState(Object(l.a)(Object(l.a)({},e.state),{},{friend_modal:!0}))}}),n=Object(m.jsx)(F,{logout:function(){e.logout()}});return!0===this.state.logged_in&&!0===this.state.friend_modal?Object(m.jsxs)(m.Fragment,{children:[t,Object(m.jsx)(L,{add_friend:function(t){return e.add_friend(t)},remove_friend:function(t){return e.remove_friend(t)},friend_obj:this.state.friend_obj,close:function(){e.setState(Object(l.a)(Object(l.a)({},e.state),{},{friend_modal:!1}))}}),n]}):!0===this.state.logged_in&&!0===this.state.create_plan?Object(m.jsxs)(m.Fragment,{children:[t,Object(m.jsx)(N,{close:function(){e.setState(Object(l.a)(Object(l.a)({},e.state),{},{create_plan:!1}))},lat:this.state.current_plan.lat,lng:this.state.current_plan.lng,submit:this.handlePlanSubmit}),n]}):!0===this.state.logged_in?Object(m.jsxs)(m.Fragment,{children:[t,n]}):Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(g,{isLoggedIn:this.state.logged_in,login:this.login})})}}]),n}(s.a.Component);r.a.createRoot(document.getElementById("navbar")).render(Object(m.jsx)(I,{}))}},[[28,1,2]]]);
//# sourceMappingURL=main.7c5306ef.chunk.js.map
